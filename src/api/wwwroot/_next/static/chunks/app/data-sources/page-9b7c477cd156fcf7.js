(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[475,872],{1475:(e,t,a)=>{"use strict";a.d(t,{createAssistant:()=>d,createConfluenceDataSource:()=>g,createDataSources:()=>f,createFAQDataSource:()=>p,createGitHubDataSource:()=>b,createSitemapDataSource:()=>v,deleteAssistant:()=>l,f4:()=>j,getAssistant:()=>c,sU:()=>o,yu:()=>y,getDataSources:()=>x,Zi:()=>i,updateAssistant:()=>u});let s=a(9509).env.NEXT_PUBLIC_API_URL||"";class r{async getAll(){let e=await fetch("".concat(this.baseUrl,"/assistants"));if(!e.ok)throw Error("Failed to fetch assistants: ".concat(e.statusText));return e.json()}async getById(e){let t=await fetch("".concat(this.baseUrl,"/assistants/").concat(e));if(!t.ok){if(404===t.status)return null;throw Error("Failed to fetch assistant: ".concat(t.statusText))}return t.json()}async create(e){let t=await fetch("".concat(this.baseUrl,"/assistants"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to create assistant: ".concat(t.statusText));return t.json()}async query(e,t){let a=await fetch("".concat(this.baseUrl,"/assistants/").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to query assistant: ".concat(a.statusText));return a.json()}async delete(e){let t=await fetch("".concat(this.baseUrl,"/assistants/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete assistant: ".concat(t.statusText))}async update(e,t){let a=await fetch("".concat(this.baseUrl,"/assistants/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw Error("Failed to update assistant: ".concat(a.statusText))}constructor(e=s){this.baseUrl=e}}let n=new r,o=()=>n.getAll(),c=e=>n.getById(e),d=e=>n.create(e),i=(e,t)=>n.query(e,t),l=e=>n.delete(e),u=(e,t)=>n.update(e,t);class h{async getAll(){let e=await fetch("".concat(this.baseUrl,"/datasources"));if(!e.ok)throw Error("Failed to fetch data sources: ".concat(e.statusText));return e.json()}async getById(e){return(await this.getAll()).find(t=>t.id===e)||null}async create(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=new FormData;e.forEach(e=>{s.append("files",e)}),s.append("name",t),s.append("useQA",a.toString());let r=new URLSearchParams({type:"file"}),n=await fetch("".concat(this.baseUrl,"/datasources?").concat(r),{method:"POST",body:s});if(!n.ok)throw Error("Failed to create data sources: ".concat(n.statusText));return n.json()}async createFAQ(e,t){let a=new FormData;e.forEach(e=>{a.append("files",e)}),a.append("name",t);let s=await fetch("".concat(this.baseUrl,"/datasources?type=faq"),{method:"POST",body:a});if(!s.ok)throw Error("Failed to create FAQ data sources: ".concat(s.statusText));return s.json()}async createConfluence(e){let t=new FormData;t.append("name",e.name),t.append("url",e.serverUrl),t.append("token",e.personalToken),t.append("parentPageId",e.parentUrl);let a=await fetch("".concat(this.baseUrl,"/datasources?type=confluence"),{method:"POST",body:t});if(!a.ok)throw Error("Failed to create Confluence data source: ".concat(a.statusText));return a.json()}async createGitHub(e){let t=new FormData;t.append("name",e.name),t.append("url",e.repositoryUrl),e.accessToken&&t.append("token",e.accessToken);let a=await fetch("".concat(this.baseUrl,"/datasources?type=github"),{method:"POST",body:t});if(!a.ok)throw Error("Failed to create GitHub data source: ".concat(a.statusText));return a.json()}async createSitemap(e){let t=new FormData;t.append("name",e.name),t.append("url",e.sitemapUrl);let a=await fetch("".concat(this.baseUrl,"/datasources?type=sitemap"),{method:"POST",body:t});if(!a.ok)throw Error("Failed to create Sitemap data source: ".concat(a.statusText));return a.json()}async delete(e){let t=await fetch("".concat(this.baseUrl,"/datasources/").concat(e),{method:"DELETE"});if(!t.ok)throw Error("Failed to delete data source: ".concat(t.statusText))}constructor(e=s){this.baseUrl=e}}let m=new h,x=()=>m.getAll(),f=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m.create(e,t,a)},p=(e,t)=>m.createFAQ(e,t),g=e=>m.createConfluence(e),b=e=>m.createGitHub(e),v=e=>m.createSitemap(e),j=e=>m.delete(e),y=e=>{switch(e){case 0:return"Stream";case 1:return"File";case 2:return"GitHub";case 3:return"URL";case 4:return"Sitemap";case 5:return"Confluence";default:return"Unknown"}}},3999:(e,t,a)=>{"use strict";a.d(t,{cn:()=>n});var s=a(2596),r=a(9688);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},4592:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(5155),r=a(2115),n=a(6874),o=a.n(n),c=a(7168),d=a(8482),i=a(6559),l=a(5274),u=a(3999);function h(e){let{...t}=e;return(0,s.jsx)(l.bL,{"data-slot":"dropdown-menu",...t})}function m(e){let{...t}=e;return(0,s.jsx)(l.l9,{"data-slot":"dropdown-menu-trigger",...t})}function x(e){let{className:t,sideOffset:a=4,...r}=e;return(0,s.jsx)(l.ZL,{children:(0,s.jsx)(l.UC,{"data-slot":"dropdown-menu-content",sideOffset:a,className:(0,u.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",t),...r})})}function f(e){let{className:t,inset:a,variant:r="default",...n}=e;return(0,s.jsx)(l.q7,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":r,className:(0,u.cn)("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...n})}var p=a(4616),g=a(6474),b=a(1154),v=a(7434),j=a(2525),y=a(7971),w=a(1475);let N=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});function k(){let[e,t]=(0,r.useState)([]),[a,n]=(0,r.useState)(!0),[l,u]=(0,r.useState)(!1),[k,S]=(0,r.useState)(!1),[T,E]=(0,r.useState)(null),[A,U]=(0,r.useState)(null);(0,r.useEffect)(()=>{C()},[]);let C=async()=>{try{n(!0),U(null);let e=await (0,w.getDataSources)();t(e)}catch(e){U(e instanceof Error?e.message:"An error occurred"),console.error("Error fetching data sources:",e)}finally{n(!1)}},D=e=>{E(e),S(!0)},F=async()=>{if(T)try{u(!0),await (0,w.f4)(T.id),await C(),S(!1),E(null)}catch(e){U(e instanceof Error?e.message:"Failed to delete data source"),console.error("Error deleting data source:",e),S(!1)}finally{u(!1)}};return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)("header",{className:"border-b border-border bg-card",children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-mono font-bold text-foreground",children:"Data Sources"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your document collections"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(y.U,{}),(0,s.jsxs)(h,{children:[(0,s.jsx)(m,{asChild:!0,children:(0,s.jsxs)(c.$,{className:"gap-2",children:[(0,s.jsx)(p.A,{className:"h-4 w-4"}),"Create Data Source",(0,s.jsx)(g.A,{className:"h-4 w-4"})]})}),(0,s.jsxs)(x,{align:"end",children:[(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(o(),{href:"/data-sources/create",className:"cursor-pointer",children:"Add Document"})}),(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(o(),{href:"/data-sources/faq/create",className:"cursor-pointer",children:"Add FAQ"})}),(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(o(),{href:"/data-sources/confluence/create",className:"cursor-pointer",children:"Add Confluence"})}),(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(o(),{href:"/data-sources/github/create",className:"cursor-pointer",children:"Add GitHub"})}),(0,s.jsx)(f,{asChild:!0,children:(0,s.jsx)(o(),{href:"/data-sources/sitemap/create",className:"cursor-pointer",children:"Add Sitemap"})})]})]})]})]})})}),(0,s.jsxs)("main",{className:"container mx-auto px-6 py-8",children:[a&&(0,s.jsxs)(d.Zp,{className:"p-12 border border-border bg-card text-center",children:[(0,s.jsx)(b.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4 animate-spin"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Loading data sources..."})]}),A&&!a&&(0,s.jsxs)(d.Zp,{className:"p-12 border border-destructive bg-card text-center",children:[(0,s.jsx)("p",{className:"text-destructive mb-4",children:A}),(0,s.jsx)(c.$,{onClick:C,variant:"outline",children:"Try Again"})]}),!a&&!A&&0===e.length&&(0,s.jsxs)(d.Zp,{className:"p-12 border border-border bg-card text-center",children:[(0,s.jsx)(v.A,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"No data sources yet"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Create your first data source to get started"})]}),!a&&!A&&e.length>0&&(0,s.jsx)("div",{className:"grid grid-cols-1 gap-4",children:e.map(e=>(0,s.jsx)(d.Zp,{className:"p-6 border border-border bg-card hover:border-primary/50 transition-colors",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h3",{className:"text-lg font-mono font-semibold text-foreground",children:e.name}),(0,s.jsx)("span",{className:"text-xs font-mono px-2 py-1 bg-primary/10 text-primary border border-primary/20",children:(0,w.yu)(e.dataSourceType)})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mb-4 leading-relaxed break-all",children:e.dataSourceValue}),(0,s.jsxs)("div",{className:"flex items-center gap-6 text-xs text-muted-foreground font-mono",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("span",{children:["Created ",N(e.createdDate)]})}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground/70",children:(0,s.jsxs)("span",{children:["ID: ",e.id]})})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2 ml-4",children:(0,s.jsxs)(c.$,{variant:"outline",size:"sm",onClick:()=>D(e),disabled:l,className:"gap-2 bg-transparent hover:border-destructive hover:text-destructive",children:[(0,s.jsx)(j.A,{className:"h-4 w-4"}),"Delete"]})})]})},e.id))})]}),(0,s.jsx)(i.Lt,{open:k,onOpenChange:S,children:(0,s.jsxs)(i.EO,{children:[(0,s.jsxs)(i.wd,{children:[(0,s.jsx)(i.r7,{children:"Delete Data Source"}),(0,s.jsxs)(i.$v,{children:['Are you sure you want to delete "',null==T?void 0:T.name,'"? This action cannot be undone and will remove all associated data.']})]}),(0,s.jsxs)(i.ck,{children:[(0,s.jsx)(i.Zr,{disabled:l,children:"Cancel"}),(0,s.jsxs)(i.Rx,{onClick:F,disabled:l,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:[l&&(0,s.jsx)(b.A,{className:"h-4 w-4 animate-spin mr-2"}),l?"Deleting...":"Delete"]})]})]})})]})}},6559:(e,t,a)=>{"use strict";a.d(t,{$v:()=>x,EO:()=>l,Lt:()=>c,Rx:()=>f,Zr:()=>p,ck:()=>h,r7:()=>m,wd:()=>u});var s=a(5155);a(2115);var r=a(4520),n=a(3999),o=a(7168);function c(e){let{...t}=e;return(0,s.jsx)(r.bL,{"data-slot":"alert-dialog",...t})}function d(e){let{...t}=e;return(0,s.jsx)(r.ZL,{"data-slot":"alert-dialog-portal",...t})}function i(e){let{className:t,...a}=e;return(0,s.jsx)(r.hJ,{"data-slot":"alert-dialog-overlay",className:(0,n.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(i,{}),(0,s.jsx)(r.UC,{"data-slot":"alert-dialog-content",className:(0,n.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...a})]})}function u(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-header",className:(0,n.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"alert-dialog-footer",className:(0,n.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(r.hE,{"data-slot":"alert-dialog-title",className:(0,n.cn)("text-lg font-semibold",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(r.VY,{"data-slot":"alert-dialog-description",className:(0,n.cn)("text-muted-foreground text-sm",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(r.rc,{className:(0,n.cn)((0,o.r)(),t),...a})}function p(e){let{className:t,...a}=e;return(0,s.jsx)(r.ZD,{className:(0,n.cn)((0,o.r)({variant:"outline"}),t),...a})}},7168:(e,t,a)=>{"use strict";a.d(t,{$:()=>d,r:()=>c});var s=a(5155);a(2115);var r=a(9708),n=a(2085),o=a(3999);let c=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d(e){let{className:t,variant:a,size:n,asChild:d=!1,...i}=e,l=d?r.DX:"button";return(0,s.jsx)(l,{"data-slot":"button",className:(0,o.cn)(c({variant:a,size:n,className:t})),...i})}},7439:(e,t,a)=>{Promise.resolve().then(a.bind(a,4592))},7971:(e,t,a)=>{"use strict";a.d(t,{U:()=>i});var s=a(5155),r=a(2115),n=a(2098),o=a(3509),c=a(1362),d=a(7168);function i(){let{theme:e,setTheme:t}=(0,c.D)(),[a,i]=r.useState(!1);return(r.useEffect(()=>{i(!0)},[]),a)?(0,s.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>t("dark"===e?"light":"dark"),className:"w-9 h-9 p-0",children:["dark"===e?(0,s.jsx)(n.A,{className:"h-4 w-4"}):(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})]}):(0,s.jsx)(d.$,{variant:"outline",size:"sm",className:"w-9 h-9 p-0 bg-transparent",children:(0,s.jsx)("span",{className:"sr-only",children:"Toggle theme"})})}},8482:(e,t,a)=>{"use strict";a.d(t,{Zp:()=>n});var s=a(5155);a(2115);var r=a(3999);function n(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...a})}}},e=>{var t=t=>e(e.s=t);e.O(0,[274,919,503,441,684,358],()=>t(7439)),_N_E=e.O()}]);